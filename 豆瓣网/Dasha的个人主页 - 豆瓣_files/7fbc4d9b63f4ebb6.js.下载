
    "use strict";function _classCallCheck(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(r,n){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?r:n}function _inherits(r,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}function _toConsumableArray(r){if(Array.isArray(r)){for(var n=0,e=Array(r.length);n<r.length;n++)e[n]=r[n];return e}return Array.from(r)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_extends=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},ErrorReporter=function(){function r(r){for(var e in r)"constructor"!==e&&"function"==typeof r[e]&&!function(){var n=r[e];r[e]=function(){try{for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];return n.call.apply(n,[this].concat(e))}catch(r){"undefined"!=typeof ErrorReporter&&ErrorReporter.reportError(r)}}}();r.data=r.data||{},r.withCk!==!1&&(r.data.ck=get_cookie("ck")),r.data.for_web||(r.data.for_mobile=1),r.error=r.error||function(r){return dui.toast.warn(r)};var t=r.ajaxError||function(){return dui.toast.networkError()};r.ajaxError=function(r){r=r||new Error("无网络连接"),r.isAjaxError=!0,t(r)},$.ajax($.extend({type:r.type||r.method||"GET",url:r.url,data:r.data,dataType:r.dataType||"json",xhrFields:{withCredentials:!("withCredentials"in r)||r.withCredentials},success:function(n){n.error?r.error?r.error(n.error,n.data,n):alert(n.error):r.success&&r.success(n)},error:function(e){if(0===e.status)r.ajaxError&&r.ajaxError();else{var t=$.parseJSON(e.response);1e3===t.code&&(t.localized_message="没有登录",n()),r.error&&r.error(t.localized_message,t)}},complete:function(n,e){r.complete&&r.complete(n,e)}},r.extra))}function n(){try{location.hostname.indexOf("dae-pre")>=0&&get_cookie("ck")&&r({url:"https://m.douban.com/pwa/offline",dataType:"html",extra:{timeout:1e4,error:function(r){return console.error(r)}}})}catch(r){window.console&&console.warn&&console.warn(r)}}function e(r){"undefined"!=typeof ErrorReporter&&ErrorReporter.reportError(r)}function t(){function r(r){var n=React[r];React[r]=function(r){function n(){var r;_classCallCheck(this,n);for(var t=arguments.length,o=Array(t),c=0;c<t;c++)o[c]=arguments[c];var i=_possibleConstructorReturn(this,(r=n.__proto__||Object.getPrototypeOf(n)).call.apply(r,[this].concat(o)));return["componentDidMount","componentDidUpdate","componentWillMount","componentWillReceiveProps","componentWillUnmount","componentWillUpdate","render","shouldComponentUpdate"].forEach(function(r){var n=i[r];"function"==typeof n&&(i[r]=function(){try{for(var t=arguments.length,o=Array(t),c=0;c<t;c++)o[c]=arguments[c];return n.apply(this,o)}catch(n){switch(e(n),console.error(n),r){case"render":return null;case"shouldComponentUpdate":return!0}}})}),i}return _inherits(n,r),n}(n)}if("undefined"!=typeof React){if("undefined"!=typeof ReactDOM){var n=ReactDOM.render;ReactDOM.render=function(){try{for(var r=arguments.length,t=Array(r),o=0;o<r;o++)t[o]=arguments[o];n.apply(this,t)}catch(r){throw e(r),r}}}r("Component"),r("PureComponent")}}function o(){["setTimeout","setInterval","setImmediate"].forEach(function(r){var n=window[r];n&&(window[r]=function(r,t){for(var o=arguments.length,c=Array(o>2?o-2:0),i=2;i<o;i++)c[i-2]=arguments[i];return n(function(){try{"function"==typeof r&&r.apply(void 0,c)}catch(r){e(r)}},t)})})}function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.level,t=void 0===e?"error":e,o=n.extra,i=void 0===o?{}:o;console.error(r),c(r.message,{level:t,stack:r.stack,extra:i})}function c(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.level,c=void 0===o?"error":o,i=t.stack,u=void 0===i?"":i,a=t.tags,f=void 0===a?{}:a,s=t.extra,l=void 0===s?{}:s;if(n&&!(n.indexOf("u.c.b.r.o.w.s.e.r")>=0)){if(n instanceof Error||n.message&&n.stack)return e(n);var p={message:n,level:c,tags:f,extra:l,stack:u};if((""+n+u).indexOf("douban")<0)return void console.log("skip error",arguments);console.error("Report: ",p);var d=JSON.stringify(p);r({url:"https://rexxar.douban.com/api/jserror/",type:"POST",withCredentials:!1,data:{ck:get_cookie("ck"),pack:d,url:location.href},success:function(r){console.log("Error report success",r)},error:function(r){console.error("Error report failed",n,c,u,l,r)}})}}function i(){o(),t()}window.React&&React.PropTypes||window.PropTypes;r.all=function(n,e){var t=0,o={},c=function(r,c){return["success","error","ajaxError","complete"].reduce(function(i,u){return o[u]=[],i[u]=function(){for(var i,a=arguments.length,f=Array(a),s=0;s<a;s++)f[s]=arguments[s];o[u][c]=f,r[u]&&(i=r[u]).call.apply(i,[null].concat(f)),"complete"===u&&(t++,t===n.length&&Object.keys(e).forEach(function(r){var n;return(n=e[r]).call.apply(n,[null].concat(_toConsumableArray(o[r])))}))},i},{})};n.forEach(function(n,e){return r(_extends({},n,c(n,e)))})},document.referrer&&document.referrer.indexOf("https://accounts.douban.com/")>=0&&n();try{document.domain.indexOf("pre")>=0&&(window.__ajax=r)}catch(r){}return function(){function r(){return tr[$][H]||J}function n(r,n){for(var e in n)r[e]=n[e]}function e(r){return r&&"object"===("undefined"==typeof r?"undefined":_typeof(r))}function t(r){return"function"==typeof r}function o(r,n){return r instanceof n}function c(r){return o(r,M)}function i(r,n,e){if(!n(r))throw l(e)}function u(){try{return O.apply(R,arguments)}catch(r){return rr.e=r,rr}}function a(r,n){return O=r,R=n,u}function f(r,n){function e(){for(var e=0;e<o;)n(t[e],t[e+1]),t[e++]=E,t[e++]=E;o=0,t.length>r&&(t.length=r)}var t=D(r),o=0;return function(r,n){t[o++]=r,t[o++]=n,2===o&&tr.nextTick(e)}}function s(r,n){var e,c,i,u,f=0;if(!r)throw l(B);var s=r[tr[$][z]];if(t(s))c=s.call(r);else{if(!t(r.next)){if(o(r,D)){for(e=r.length;f<e;)n(r[f],f++);return f}throw l(B)}c=r}for(;!(i=c.next()).done;)if(u=a(n)(i.value,f++),u===rr)throw t(c[L])&&c[L](),u.e;return f}function l(r){return new TypeError(r)}function p(r){return(r?"":K)+(new M).stack}function d(r,n){var e="on"+r.toLowerCase(),t=A[e];S&&S.listeners(r).length?r===Z?S.emit(r,n._v,n):S.emit(r,n):t?t({reason:n._v,promise:n}):tr[r](n._v,n)}function h(r){return r&&r._s}function y(r){if(h(r))return new r(nr);var n,e,o;return n=new r(function(r,t){if(n)throw l();e=r,o=t}),i(e,t),i(o,t),n}function v(r,n){return function(e){U&&(r[Y]=p(!0)),n===I?x(r,e):b(r,n,e)}}function _(r,n,e,o){return t(e)&&(n._onFulfilled=e),t(o)&&(r[N]&&d(X,r),n._onRejected=o),U&&(n._p=r),r[r._c++]=n,r._s!==W&&or(r,n),n}function m(r){if(r._umark)return!0;r._umark=!0;for(var n,e=0,t=r._c;e<t;)if(n=r[e++],n._onRejected||m(n))return!0}function w(r,n){function e(r){return t.push(r.replace(/^\s+|\s+$/g,""))}var t=[];return U&&(n[Y]&&e(n[Y]),function r(n){n&&G in n&&(r(n._next),e(n[G]+""),r(n._p))}(n)),(r&&r.stack?r.stack:r)+("\n"+t.join("\n")).replace(er,"")}function g(r,n){return r(n)}function b(r,n,e){var t=0,o=r._c;if(r._s===W)for(r._s=n,r._v=e,n===F&&(U&&c(e)&&(e.longStack=w(e,r)),cr(r));t<o;)or(r,r[t++]);return r}function x(r,n){if(n===r&&n)return b(r,F,l(Q)),r;if(n!==C&&(t(n)||e(n))){var o=a(k)(n);if(o===rr)return b(r,F,o.e),r;t(o)?(U&&h(n)&&(r._next=n),h(n)?j(r,n,o):tr.nextTick(function(){j(r,n,o)})):b(r,I,n)}else b(r,I,n);return r}function k(r){return r.then}function j(r,n,e){var t=a(e,n)(function(e){n&&(n=C,x(r,e))},function(e){n&&(n=C,b(r,F,e))});t===rr&&n&&(b(r,F,t.e),n=C)}var E,O,R,C=null,T="object"===("undefined"==typeof window?"undefined":_typeof(window)),A=T?window:global,S=A.process,P=A.console,U=!1,D=Array,M=Error,F=1,I=2,W=3,$="Symbol",z="iterator",H="species",J=$+"("+H+")",L="return",N="_uh",G="_pt",Y="_st",q="Invalid this",B="Invalid argument",K="\nFrom previous ",Q="Chaining cycle detected for promise",V="Uncaught (in promise)",X="rejectionHandled",Z="unhandledRejection",rr={e:C},nr=function(){},er=/^.+\/node_modules\/yaku\/.+\n?/gm,tr=function(r){var n,o=this;if(!e(o)||o._s!==E)throw l(q);if(o._s=W,U&&(o[G]=p()),r!==nr){if(!t(r))throw l(B);n=a(r)(v(o,I),v(o,F)),n===rr&&b(o,F,n.e)}};tr.default=tr,n(tr.prototype,{then:function(r,n){if(void 0===this._s)throw l();return _(this,y(tr.speciesConstructor(this,tr)),r,n)},catch:function(r){return this.then(E,r)},finally:function(r){return this.then(function(n){return tr.resolve(r()).then(function(){return n})},function(n){return tr.resolve(r()).then(function(){throw n})})},_c:0,_p:C}),tr.resolve=function(r){return h(r)?r:x(y(this),r)},tr.reject=function(r){return b(y(this),F,r)},tr.race=function(r){var n=this,e=y(n),t=function(r){b(e,I,r)},o=function(r){b(e,F,r)},c=a(s)(r,function(r){n.resolve(r).then(t,o)});return c===rr?n.reject(c.e):e},tr.all=function(r){function n(r){b(o,F,r)}var e,t=this,o=y(t),c=[];return e=a(s)(r,function(r,i){t.resolve(r).then(function(r){c[i]=r,--e||b(o,I,c)},n)}),e===rr?t.reject(e.e):(e||b(o,I,[]),o)},tr.Symbol=A[$]||{},a(function(){Object.defineProperty(tr,r(),{get:function(){return this}})})(),tr.speciesConstructor=function(n,e){var t=n.constructor;return t?t[r()]||e:e},tr.unhandledRejection=function(r,n){P&&P.error(V,U?n.longStack:w(r,n))},tr.rejectionHandled=nr,tr.enableLongStackTrace=function(){U=!0},tr.nextTick=T?function(r){setTimeout(r)}:S.nextTick,tr._s=1;var or=f(999,function(r,n){var e,t;return t=r._s!==F?n._onFulfilled:n._onRejected,t===E?void b(n,r._s,r._v):(e=a(g)(t,r._v),e===rr?void b(n,F,e.e):void x(n,e))}),cr=f(9,function(r){m(r)||(r[N]=1,d(Z,r))});try{module.exports=tr}catch(r){A.Yaku=tr}}(),{register:i,report:c,reportError:e}}();

    ErrorReporter.register()
  ;
  ;(function() {

    "use strict";function _defineProperty(e,o,r){return o in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}var _extends=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,o){"function"==typeof define&&define.amd?define([],o):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=o():(e.SWCache&&e.console&&console.warn&&console.warn("window.Lazify already exists! Skipped"),e.SWCache=e.SWCache||o())}(window,function(){function e(e){var o=0;for(var r in e)o=(o<<5)-o+e.charCodeAt(r),o|=0;return o}function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.search.indexOf("debug=1")>=0||window.localStorage&&localStorage.debug,n=void 0;r&&(o.state[e]=!0);var i=e in o.state?o.state[e]:o.defaultState;if(i===!1)n=o.noop;else{var t=o.selectColor(e);n=function(){for(var o,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];(o=console).log.apply(o,["%c"+e+"%c","color: "+t+";","color: inherit;"].concat(n))},n.isEnable=!0}return n}function r(e){return Object.keys(e).reduce(function(o,r){var n=_typeof(e[r]);return"function"!==n&&(o[r]=e[r]),o},{})}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=navigator,a=n.serviceWorker;if(a){if(s=_extends({},s,e),s.debug&&(t=o("pwa:cache",!0)),i.isFrodo()||i.isWeixin()||i.isWeibo()||i.isXiaomi()||i.isBaidu()||i.isWeapp()||i.isQQDownloader()||i.isOppoBrowser()||"undefined"!=typeof DISABLE_SERVICE_WORKER)return void navigator.serviceWorker.getRegistrations().then(function(e){if(e.length){var o=!0,r=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(o=(i=a.next()).done);o=!0){var c=i.value;c.unregister().then(function(e){return t("Unregister Service Worker["+s.serviceWorkerUrl+"]: "+e)})}}catch(e){r=!0,n=e}finally{try{!o&&a.return&&a.return()}finally{if(r)throw n}}}});t("settings",s),a.register(s.serviceWorkerUrl,{scope:s.scope}).then(function(e){t("register",e);var o=e.installing||e.active||a.controller;o.postMessage({action:"set-settings",settings:r(s)})}).catch(o.logErr)}}var i=function(){function e(e){return function(){return e.test(o)}}var o=navigator.userAgent||"";return{isWeixin:e(/micromessenger/i),isWeibo:e(/weibo/i),isXiaomi:e(/xiaomi/i),isBaidu:e(/baiduboxapp|baidubrowser/i),isIOS:e(/iphone|ipad|ipod/i),isAndroid:e(/android/i),isMobile:e(/(iphone|ipod|((?:android)?.*?mobile)|blackberry|nokia)/i),isFrodo:e(/com\.douban\.frodo/i),isWeapp:e(/miniprogram/i)||"miniprogram"===window.__wxjs_environment,isBaiduMiniProgram:e(/swan|swan-baiduboxapp/i),isToutiaoMiniProgram:e(/bytedanceide|toutiaomicroapp/i),isQQDownloader:e(/\/qqdownloader\/(\d+)(?:\/(appdetail|external|sdk))?/i),isOppoBrowser:e(/OppoBrowser/i)}}();o.noop=function(){},o.noop.isEnable=!0,o.state={},o.defaultState=!1,o.enable=function(e){if("object"===("undefined"==typeof e?"undefined":_typeof(e)))o.state=_extends({},o.state,e);else{if("string"==typeof e)return o.state=_extends({},o.state,_defineProperty({},e,!0)),o(e);o.defaultState=e}},o.selectColor=function(r){return o.colors[Math.abs(e(r))%o.colors.length]},o.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],o.logErr=function(){if("undefined"!=typeof console&&console.error){var e;(e=console).error.apply(e,arguments)}};var t=o.noop,a={serviceWorkerUrl:"/pwa/cache_worker",scope:"/",debug:!1,precache:[],currentPath:location.pathname,offlineUrl:"/pwa/offline",onNetworkChange:null},s=_extends({},a);return{start:n}});

    SWCache.start({
      // debug: false,
      currentPath: location.pathname,
      precache: [
        'https://img3.doubanio.com/f/talion/f8b8fa66f110083144daf3f89367db3ef5a0bee1/pics/card/offline/ic_offline.png',
        'https://img3.doubanio.com/f/talion/6cd76c90e48131ae42f06eaa7026efaf8e741758/pics/card/offline/ic_refresh.png',
        'https://img3.doubanio.com/f/talion/4eddaaed2bec5a0baa663274d47d136c54a2c03c/css/card/base.css',
        'https://img3.doubanio.com/f/talion/ee8e0c54293aefb5709ececbdf082f8091ad5e49/js/lib/zepto/zepto.min.js',
        'https://img3.doubanio.com/f/talion/23a1fcd456f61b8a843c7d1a8a2904cab3bb74f0/js/card/main.js',
        'https://img3.doubanio.com/f/talion/edb4a934937733a0163b69e6cc3ad3f689c92d1c/pics/card/defaults/cover.png',
        'https://img3.doubanio.com/f/talion/9c85529e7a0fbe585a2091edd8b9751a1db10ca9/pics/card/defaults/avatar.jpg',
      ],
      offlineUrl: '/pwa/offline',
    })
  }());
  